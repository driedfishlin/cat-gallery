(this["webpackJsonpcat-gallery"]=this["webpackJsonpcat-gallery"]||[]).push([[0],{38:function(t,e,a){},65:function(t,e,a){"use strict";a.r(e);var c=a(1),n=a.n(c),i=a(29),r=a.n(i),s=(a(38),a(3)),o=a(11),l=a(2),u=a(12),b=function(t,e){var a=JSON.parse(JSON.stringify(t));switch(e.type){case"login":return Object(u.a)(Object(u.a)({},t),{},{isLogin:e.isLogin});case"getPublicCats":var c=a.catList.publicCats,n=Object(u.a)(Object(u.a)({},c),e.data);return a.catList.publicCats=n,a;case"getMyCats":var i=a.catList.myCats,r=Object(u.a)(Object(u.a)({},i),e.data);return a.catList.myCats=r,a;case"getMyFavorites":var s=a.catList.myFavorites,o=Object(u.a)(Object(u.a)({},s),e.data);return a.catList.myFavorites=o,a;default:return t}},j={isLogin:!1,catList:{publicCats:{currentPage:0,totalPage:0,limitImg:9,list:null},myCats:{currentPage:0,totalPage:0,limitImg:9,list:null},myFavorites:{currentPage:0,totalPage:0,limitImg:9,list:null}}},d=[{action:"index",name:"\u9996\u9801",path:"/",subTitle:"Cats From All Over The World"},{action:"login",name:"\u767b\u5165",path:"/login",subTitle:"Login"},{action:"favorites",name:"\u6211\u7684\u6536\u85cf",path:"/myfavorites",subTitle:"My Favorites"},{action:"uploaded",name:"\u6211\u7684\u8c93\u8c93",path:"/mycat",subTitle:"My Cat"},{action:"upload",name:"\u4e0a\u50b3\u8c93\u8c93",path:"/mycat/upload",subTitle:"Upload"},{action:"logout",name:"\u767b\u51fa",path:"/login",subTitle:""}],h=a(0),g=function(t){var e=t.page,a=t.onClick;return Object(h.jsx)("li",{className:"mx-5 text-lg",children:Object(h.jsx)(o.c,{onClick:a,to:d.find((function(t){return t.action===e})).path,exact:!0,activeClassName:"text-th-yellow bg-th-black",children:d.find((function(t){return t.action===e})).name})})},m=function(t){var e=t.dispatch,a=t.store;return Object(h.jsx)("nav",{className:"my-10",children:Object(h.jsxs)("ul",{className:"flex justify-center",children:[Object(h.jsx)(g,{page:"index"}),a.isLogin?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(g,{page:"uploaded"}),Object(h.jsx)(g,{page:"upload"}),Object(h.jsx)(g,{page:"favorites"}),Object(h.jsx)(g,{page:"logout",onClick:function(){return e({type:"login",isLogin:!1})}})]}):Object(h.jsx)(g,{page:"login"})]})})},p=function(t){var e=t.store,a=t.dispatch,c=Object(l.h)().pathname;return Object(h.jsxs)("header",{className:"my-20",children:[Object(h.jsxs)("div",{className:"h-40 flex flex-col",children:[Object(h.jsx)("h1",{className:"text-center text-7xl mb-12",children:"Cat Gallery"}),Object(h.jsx)("h2",{className:"text-center text-md w-2/3 self-end font-bit tracking-normal",children:"> "+d.find((function(t){return t.path===c})).subTitle})]}),Object(h.jsx)(m,{dispatch:a,store:e})]})},A=a(4),I=a.n(A),O=a(9),x=a(13),E=a.n(x),v="3e3b82c0-d2af-4c0a-b086-1cadee71d830",C="https://api.thecatapi.com/v1",f=function(t){var e=new FormData;return e.append("file",t),E()({headers:{"x-api-key":v,"Content-Type":"multipart/form-data"},method:"post",url:C+"/images/upload",data:e})},y=function(t){return E()({headers:{"x-api-key":v},method:"delete",url:C+"/images/"+t})},Q=function(t,e){return E()({method:"get",url:C+"/images/",params:{limit:t,page:e,order:"ASC",format:"json"},headers:{"x-api-key":v}})},w=function(t,e){return E()({method:"get",url:C+"/images/search",params:{limit:t,page:e,order:"ASC",size:"small"},headers:{"x-api-key":"DEMO-API-KEY"}})},N=function(t,e){return E()({method:"get",url:C+"/favourites",params:{limit:t,page:e},headers:{"x-api-key":v}})},B=function(t){return E()({method:"post",headers:{"x-api-key":v},url:C+"/favourites/",data:{image_id:t,sub_id:t}})},Z=function(t){return E()({method:"delete",headers:{"x-api-key":v},url:C+"/favourites/"+t})},G=function(t){var e=t.imgSrc,a=t.isLogin,n=t.id,i=t.favoriteId,r=Object(l.h)().pathname,o=Object(c.useState)(void 0!==i),u=Object(s.a)(o,2),b=u[0],j=u[1],d=Object(c.useState)(!1),g=Object(s.a)(d,2),m=g[0],p=g[1],A=function(){var t=Object(O.a)(I.a.mark((function t(e){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),t.prev=1,t.next=4,B(e);case 4:j(!0),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),console.error(t.t0.message),"DUPLICATE_FAVOURITE - favourites are unique for account + image_id + sub_id"===t.t0.response.data.message&&j(!0);case 11:return t.prev=11,void 0!==i&&p(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,7,11,14]])})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=Object(O.a)(I.a.mark((function t(e){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),t.prev=1,t.next=4,Z(e);case 4:j(!1),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.error(t.t0.message);case 10:return t.prev=10,p(!1),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[1,7,10,13]])})));return function(e){return t.apply(this,arguments)}}(),E=function(){var t=Object(O.a)(I.a.mark((function t(e){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),t.prev=1,t.next=4,y(e);case 4:window.location.assign(window.location.href),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.error(t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"my-10 mx-10 px-2 relative group",children:[a&&Object(h.jsx)("button",{onClick:b?function(){return x(i)}:function(){return A(n)},className:"w-14 h-14 bg-white rounded-full absolute shadow-lg flex justify-center items-center transition-transform duration-150 transform active:scale-110 ".concat(m?"pointer-events-none":""),children:Object(h.jsx)("img",{className:"w-2/3 h-2/3 ".concat(b?"":"opacity-20 hover:opacity-60"),src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAYAAAA+s9J6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAF92lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0NDYwLCAyMDIwLzA1LzEyLTE2OjA0OjE3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMiAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjEtMDYtMjVUMTY6NTY6NTYrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIxLTA2LTI1VDE3OjAwOjU4KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIxLTA2LTI1VDE3OjAwOjU4KzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjZjOGQxNTE4LWQ3NmUtNGU0MC05YmNiLWJkNTQ2ZDE2YjJlZiIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjg2OTg0NDQzLThhNzYtNTk0Zi1iYTgyLTBkNThjMzNhZmExYSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjA5ZjkwYTI3LTMxOWMtNGRlMC05OWMxLTU1NDMyYzEwMmMwOCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDlmOTBhMjctMzE5Yy00ZGUwLTk5YzEtNTU0MzJjMTAyYzA4IiBzdEV2dDp3aGVuPSIyMDIxLTA2LTI1VDE2OjU2OjU2KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjEuMiAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NmM4ZDE1MTgtZDc2ZS00ZTQwLTliY2ItYmQ1NDZkMTZiMmVmIiBzdEV2dDp3aGVuPSIyMDIxLTA2LTI1VDE3OjAwOjU4KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjEuMiAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz64dAz0AAADLUlEQVR42u3cPU4bURSG4YtTRbLSIAdRxemoYRP0ySKyCPaQZaRhAVlE0kQu6DwtIKwUlvkR9o2NRO9IPieZ6+eRvhpp4MXj5gxqraWF/fj0Ybpe7fmmntX/9awyNijAPyVCECGIEBAhiBAQIYgQECGIEBAhiBAQIYgQECGIEBAhiBAQIYgQECGIEBAhiBDoa4Q/P4+n0RuNRrP1Ss83S3lW74+u1is931XGs2rtk3AcvNMG/imeJjynzc4beFbnCc/J6yh4HQVECCIERAgiBEQIIgRECCIERAgiBEQIIgRECCIERAgiBEQIIgRECCIERLi6n4cPQiJs4TDv4fBtOb74Fr4yeBO+jCPDrWjlwPDmk3BcHObdTq3+be+XjAPDY98JwXdCECEgQhAhIEIQISBCECEgQhAhIEIQISBCECEgQhAhIEIQISBCECEgQhAhBweeAf2MsD49hm5zNPf665fw5fxG4g8M45MQECGIEBAhiBAQIYgQROgRgAhBhIAIQYSACEGEgAhBhIAIQYSACEGEgAhBhIAIQYRAAxHW5XPoympV6sMifKXW+CFCQIQgQkCEIEJAhCBCQIQgQkCEIEJAhCBCQIQgQkCEIEJAhCBCQIQgQkCEIEJgNxF2CZt41PTQ94w+BmeX3cfo3c0Xw9/zRYlc9IHhlz3eh4/t3d5cR+8ko4+019Fl8MB3QkCEIEJAhCBCQIQgQkCEIEJAhCBCQIQgQkCEIEJAhCBCQIQgQkCEIEJAhLCvEXbB++XXuVcyDvO2E2HSgeF365WopR0YfliEL0Mrh3m9joLXUUCEIEJAhCBCQIQgQkCEIEJAhCBCQIQgQkCEIEJAhCBCQIQgQkCEIEJAhMGWHgEi3EoXvIk/ma00c5hXhH8h6cDw8PUQ8K6XeWB45jCvCFt4Nd318DoKiBBECIgQRAiIEEQIiBBECIgQRAiIEEQIiBBECIgQRAiIEEQIiBBECIiwXcvGfg4ijNKVfh8YnhSHeUXYV5kHhgM3dJhXhIAIQYSACEGEgAhBhCBCjwBECCIERAgiBEQIIgRECCIERAgiBEQIIgRECCIERAgiBGL9AR9d+bZb64M1AAAAAElFTkSuQmCC",alt:"heart"})}),Object(h.jsx)("div",{className:"w-60 h-60 rounded-full overflow-hidden shadow-xl bg-th-black",children:e&&Object(h.jsx)("img",{className:"object-cover h-full w-full",src:e,alt:"cat"})}),"/mycat"===r&&n&&Object(h.jsx)("button",{onClick:function(){return E(n)},className:"bg-white text-2xl w-10 h-10 rounded-full  leading-10 absolute right-3 bottom-3 transition-transform transform ".concat(m?"pointer-events-none":"invisible scale-0"," group-hover:visible group-hover:scale-100"),children:"\xd7"})]})},T="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANIAAAC+CAYAAABAr1FjAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF92lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0NDYwLCAyMDIwLzA1LzEyLTE2OjA0OjE3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMiAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjEtMDYtMjVUMTc6MTk6MTMrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIxLTA2LTI1VDE3OjIwOjQyKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIxLTA2LTI1VDE3OjIwOjQyKzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmU0YTRjOGExLTE3YjktNDc5My05YTcxLTVlM2VhOTRjYzk0MCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjM5YzZhNjdlLThmODQtMDk0ZS05Y2IyLTA4ODM2YjE1ZjhkNCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmE0MTdjNTBhLTZmMDEtNDQ4Mi04Njg0LTA3OTJmYjJkM2YzZCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YTQxN2M1MGEtNmYwMS00NDgyLTg2ODQtMDc5MmZiMmQzZjNkIiBzdEV2dDp3aGVuPSIyMDIxLTA2LTI1VDE3OjE5OjEzKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjEuMiAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZTRhNGM4YTEtMTdiOS00NzkzLTlhNzEtNWUzZWE5NGNjOTQwIiBzdEV2dDp3aGVuPSIyMDIxLTA2LTI1VDE3OjIwOjQyKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjEuMiAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5zT3qmAAACh0lEQVR42u3dwW2DMBSA4SKlncNZqEN0sAzRhXhzpAfnwq2iehQEGH/f2UoUJ79siSflVmt9A9a52QIQEggJhAQICYQEQgIhAUKCE4Y0DIMdXGc86H3vtv63NVM+TqTjlZ3fL2y5qx0ICYQECAmEBEICIQFCAiExeT5y6z6+0i+ZnagwASEkZpTkurBVQgIhgZBASICQQEggJBASICQmJiCExPmU5LqwVUICIYGQQEiAkEBIICQQEiAkJiYghMT5lOS6cCIBQgIhgZBASICQQEggJBDSMqMtPI/38pla9xPfqXUmIPYLqfj5svFvJVztwNUOEBIICYQEQrIFICQQEghpgewTcvZhAsKJxPWV5LpwtQNXO0BIICQQEggJEBIICYS0QPaJO+f6PkxAOJFoV0muC1c7cLUDIQFCAiGBkEBIgJBASDTLBISQuL6SXBdOJHC1AyEBQgIhgZBASICQQEg0q4EJCCGBEwmEBAgJhARCAiEBQgIhgZDoVnZiIWuPiQUhgZBASCAkQEggJBASCAkQEswLIdGEBiYW7kICVzsQEiAkEBIICYQECAmEBHkhpBlbPyHvTfbfHo76PlqcWHAigZBASCAkQEggJBASCAkQElcSQppxpn8NaNHzse3rmVhwIoGQQEiAkEBIICQQEiAkaCOksIWrlU4+Zwhp3l0Hq4xbvpiJBVc7EBIICRASCAmEBAgJhARC4lrCFgipSyYWhARCAiEBQgIhgZBASICQQEgcK2yBkLpkYkFIICQQEiAkEBIICRASCAmExLHCFgipSyYWhARCAoQEQgIhgZAAIYGQQEj8T9iCzkOqtdrBdUwYCAkQEggJhARCAoQEQgIhgZCAv7wAiIxdBs7TC1gAAAAASUVORK5CYII=",M=function(t){var e=t.currentNum,a=t.totalNum,c=t.ajaxFn,n=function(t){c(t),window.scrollTo({top:0,behavior:"smooth"})};return Object(h.jsxs)("div",{className:"flex justify-center items-center my-16",children:[Object(h.jsx)("button",{onClick:e>1?function(){return n(-1)}:null,children:Object(h.jsx)("img",{className:"w-14 h-14 opacity-80 transform rotate-180",src:T,alt:"arrow"})}),Object(h.jsxs)("p",{className:"mx-10 text-2xl font-bit",children:[Object(h.jsx)("span",{children:e||1})," / ",Object(h.jsx)("span",{children:a||1})]}),Object(h.jsx)("button",{onClick:e<a?function(){return n(1)}:null,children:Object(h.jsx)("img",{className:"w-14 h-14 opacity-80",src:T,alt:"arrow"})})]})},L=function(t){var e=t.situation,a=t.customClass;return Object(h.jsxs)("div",{className:"mx-auto my-20",children:[Object(h.jsx)("p",{className:"text-xl text-center ".concat(a),children:function(){switch(e){case"noLogin":return"\u76ee\u524d\u672a\u767b\u5165";case"noData":return"\u6c92\u6709\u8cc7\u6599";default:return"\u767c\u751f\u932f\u8aa4"}}()}),"noLogin"===e&&Object(h.jsx)(o.b,{className:"mx-auto max-w-max block my-10 bg-yellow-500 text-white py-3 px-5 rounded-md",to:"/login",children:"\u56de\u767b\u5165\u9801\u9762"})]})},S=function(t){var e=t.reducerArr,a=t.currentPageData,c=t.ajaxFn,n=e[0];return"/"!==Object(l.h)().pathname&&!1===n.isLogin?Object(h.jsx)(L,{situation:"noLogin"}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"flex flex-wrap",children:[null!==a.list&&(0===a.list.length?Object(h.jsx)(L,{situation:"noData"}):a.list.map((function(t){var e=t.id,a=t.url,c=t.favoriteId;return Object(h.jsx)(G,{imgSrc:a,id:e,favoriteId:c,isLogin:n.isLogin},c||e)}))),null===a.list&&Array.from({length:9},(function(){return 1})).map((function(t,e){return Object(h.jsx)(G,{},e)}))]}),Object(h.jsx)(M,{currentNum:a.currentPage+1,totalNum:a.totalPage,ajaxFn:c})]})},R=function(t){var e=t.store,a=t.dispatch,n=Object(c.useState)(!1),i=Object(s.a)(n,2),r=i[0],o=i[1],l=function(){var t=Object(O.a)(I.a.mark((function t(){var c,n,i,r=arguments;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.length>0&&void 0!==r[0]?r[0]:0,t.prev=1,t.next=4,w(e.catList.publicCats.limitImg,e.catList.publicCats.currentPage+c);case 4:n=t.sent,i={currentPage:+n.headers["pagination-page"],totalPage:+n.headers["pagination-count"],list:n.data.map((function(t){return{id:t.id,url:t.url}}))},a({type:"getPublicCats",data:i}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0.message),o(!0);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){l()}),[]),r?Object(h.jsx)(L,{customClass:"py-20"}):Object(h.jsx)(S,{currentPageData:e.catList.publicCats,ajaxFn:l,reducerArr:[e,a]})},k=function(t){var e=t.store,a=t.dispatch,n=Object(c.useState)(!1),i=Object(s.a)(n,2),r=i[0],o=i[1],l=function(){var t=Object(O.a)(I.a.mark((function t(){var c,n,i,r=arguments;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.length>0&&void 0!==r[0]?r[0]:0,t.prev=1,t.next=4,Q(e.catList.myCats.limitImg,e.catList.myCats.currentPage+c);case 4:n=t.sent,i={currentPage:+n.headers["pagination-page"],totalPage:Math.ceil(+n.headers["pagination-count"]/9),list:n.data.map((function(t){return{id:t.id,url:t.url}}))},a({type:"getMyCats",data:i}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0.message),o(!0);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){l()}),[]),r?Object(h.jsx)(L,{customClass:"py-20"}):Object(h.jsx)(S,{currentPageData:e.catList.myCats,ajaxFn:l,reducerArr:[e,a]})},Y=function(t){var e=t.store,a=t.dispatch,n=Object(c.useState)(!1),i=Object(s.a)(n,2),r=i[0],o=i[1],l=function(){var t=Object(O.a)(I.a.mark((function t(){var c,n,i,r=arguments;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.length>0&&void 0!==r[0]?r[0]:0,t.prev=1,t.next=4,N(e.catList.myFavorites.limitImg,e.catList.myFavorites.currentPage+c);case 4:n=t.sent,i={currentPage:+n.headers["pagination-page"],totalPage:Math.ceil(+n.headers["pagination-count"]/9),list:n.data.map((function(t){return{id:t.image.id,favoriteId:t.id,url:t.image.url}}))},a({type:"getMyFavorites",data:i}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0.message),o(!0);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){l()}),[]),r?Object(h.jsx)(L,{customClass:"py-20"}):Object(h.jsx)(S,{currentPageData:e.catList.myFavorites,ajaxFn:l,reducerArr:[e,a]})},D=function(t){var e=t.text,a=t.color,c=t.onClick,n=t.customClass,i=t.disabled;return Object(h.jsx)("button",{disabled:i||!1,onClick:c||null,className:"mt-5 py-3 px-5 text-white rounded-md focus:ring-0 ".concat(a||"bg-yellow-500 active:bg-yellow-600"," ").concat(n||""),children:e})},W="mb-1",z="text-th-black bg-gray-100 rounded-md mb-5 border-none  focus:ring-0",P=function(t){for(var e=0,a=0;a<t.length;++a)e=Math.imul(31,e)+t.charCodeAt(a);return 0|e},J=Object(l.i)((function(t){var e=t.dispatch,a=t.history,n=Object(c.useState)(""),i=Object(s.a)(n,2),r=i[0],o=i[1],l=Object(c.useState)(""),u=Object(s.a)(l,2),b=u[0],j=u[1],d=Object(c.useState)(!1),g=Object(s.a)(d,2),m=g[0],p=g[1],A=Object(c.useState)(""),I=Object(s.a)(A,2),O=I[0],x=I[1],E=function(t){var e="login_account"===t.target.id?t.target.value:null,a="login_password"===t.target.id?t.target.value:null;if(/^[a-zA-Z0-9]{6,12}$/.test(e||r)&&/^[a-zA-Z0-9]{6,12}$/.test(a||b))return p(!0);p(!1)},v=function(t){return t.target.value.length>12?(p(!1),void x("".concat("login_account"===t.target.id?"\u5e33\u865f":"\u5bc6\u78bc","\u9577\u5ea6\u70ba 6-12 \u500b\u5b57\u5143"))):/^[a-zA-Z0-9]*$/.test(t.target.value)?void x(""):(p(!1),void x("\u50c5\u63a5\u53d7\u5927/\u5c0f\u5beb\u82f1\u6587\u5b57\u6bcd\u3001\u6578\u5b57"))},C=function(t){if(t.target.value.length<6)return p(!1),void x("".concat("login_account"===t.target.id?"\u5e33\u865f":"\u5bc6\u78bc","\u9577\u5ea6\u70ba 6-12 \u500b\u5b57\u5143"));x("")};return Object(h.jsx)("div",{className:"w-1/3 mx-auto bg-white p-10 rounded-md shadow-lg",children:Object(h.jsxs)("form",{onSubmit:function(t){t.preventDefault();try{if("1066265387"===String(P(r.trim()))&&"-1861386176"===String(P(b)))return console.log("correct"),e({type:"login",isLogin:!0}),a.replace("/");throw new Error("\u5e33\u865f\u6216\u5bc6\u78bc\u932f\u8aa4")}catch(c){console.log(c),x(c.message)}},className:"flex flex-col",children:[Object(h.jsx)("label",{htmlFor:"login_account",className:W,children:"\u5e33\u865f"}),Object(h.jsx)("input",{onChange:function(t){o(t.target.value),v(t),E(t)},onBlur:C,id:"login_account",className:z,type:"text",value:r}),Object(h.jsx)("label",{htmlFor:"login_password",className:W,children:"\u5bc6\u78bc"}),Object(h.jsx)("input",{onChange:function(t){j(t.target.value),v(t),E(t)},onBlur:C,id:"login_password",className:z,type:"password",value:b}),Object(h.jsx)("p",{className:"text-center text-sm text-red-500 h-5 ".concat(O?"":"invisible"),children:O}),Object(h.jsx)(D,{text:"\u767b\u5165",customClass:"".concat(m?"":"pointer-events-none opacity-50")})]})})})),U=a(31),F=a.n(U),X=a(32),V=(a(64),function(t){var e=t.customClass;return Object(h.jsx)("div",{className:"w-full h-full flex items-center justify-center ".concat(e),children:Object(h.jsx)("div",{style:{borderTopColor:"rgba(233,233,255,0.5)",borderRightColor:"rgba(233,233,255,0.5)",borderBottomColor:"rgba(233,233,255,0.5)"},className:"w-10 h-10 border-4 border-th-black rounded-full animate-spin"})})}),H=function(){var t=Object(c.useRef)(null),e=Object(c.useState)(null),a=Object(s.a)(e,2),n=a[0],i=a[1],r=Object(c.useState)(null),o=Object(s.a)(r,2),u=o[0],b=o[1],j=Object(c.useState)(!1),d=Object(s.a)(j,2),g=d[0],m=d[1],p=Object(c.useState)(!1),A=Object(s.a)(p,2),x=A[0],E=A[1],v=Object(l.g)();Object(c.useEffect)((function(){var t=document.getElementById("dropzone_block");try{new F.a(t,{url:"/upload",uploadMultiple:!1,transformFile:function(e){try{if(e.size>5e5)return b("\u6a94\u6848\u5c3a\u5bf8\u9700\u5c0f\u65bc 500kb\uff01");if(!["image/jpeg","image/png"].includes(e.type))return b("\u6a94\u6848\u9700\u70ba JPEG / PNG \u683c\u5f0f\uff01");var a=URL.createObjectURL(e);i(a)}finally{t.innerHTML=""}}})}catch(e){}}),[]);var C=function(){var e=Object(O.a)(I.a.mark((function e(a){var c,n,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),m(!0),e.prev=2,t.current){e.next=5;break}return e.abrupt("return");case 5:return c=t.current.cropper.getCroppedCanvas().toDataURL(),e.next=8,fetch(c);case 8:return n=e.sent,e.next=11,n.blob();case 11:return i=e.sent,e.next=14,f(i);case 14:v.replace("/mycat"),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),console.error(e.t0.message),E(!0);case 21:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}();return x?Object(h.jsx)(L,{customClass:"py-20"}):Object(h.jsxs)("div",{className:"relative",children:[Object(h.jsxs)("form",{onSubmit:C,className:"flex flex-col items-center ".concat(g?"pointer-events-none opacity-60":""),children:[Object(h.jsx)("div",{className:"relative mb-14 bg-white rounded-2xl shadow-md",style:{height:400,width:600,marginRight:"auto",marginLeft:"auto"},children:null===n?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{id:"dropzone_block",className:"w-full h-full cursor-pointer"}),Object(h.jsxs)("div",{className:"absolute transform top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 pointer-events-none",children:[Object(h.jsx)("p",{className:"text-center whitespace-nowrap text-xl mb-5 opacity-50",children:"\u9ede\u64ca\u5340\u584a\u6216\u62d6\u66f3\u6a94\u6848\u4ee5\u9032\u884c\u5716\u7247\u4e0a\u50b3"}),Object(h.jsx)("p",{className:"text-center whitespace-nowrap opacity-50 mb-5",children:"\u63a5\u53d7\u683c\u5f0f\uff1aJPEG\u3001PNG / 500KB \u4ee5\u4e0b / \u5fc5\u9808\u542b\u6709\u8c93\u8c93\uff01"}),Object(h.jsx)("p",{className:"text-center text-red-500 whitespace-nowrap block h-5",children:u||""})]})]}):Object(h.jsx)(X.a,{className:"",src:n,style:{height:"100%",width:"100%"},background:!1,initialAspectRatio:1.5,ref:t,viewMode:1,minCropBoxHeight:100,minCropBoxWidth:100,responsive:!0})}),Object(h.jsx)(D,{text:"\u4e0a\u50b3",disabled:!n,customClass:n||"opacity-50"})]}),g&&Object(h.jsx)(V,{customClass:"absolute top-0 left-0"})]})};var K=function(){var t=Object(c.useReducer)(b,j),e=Object(s.a)(t,2),a=e[0],n=e[1];return Object(h.jsx)(o.a,{children:Object(h.jsxs)("div",{className:"max-w-screen-lg mx-auto pb-28",children:[Object(h.jsx)(p,{store:a,dispatch:n}),Object(h.jsx)("main",{children:Object(h.jsxs)(l.d,{children:[Object(h.jsx)(l.b,{path:d.find((function(t){return"upload"===t.action})).path,exact:!0,children:Object(h.jsx)(H,{})}),Object(h.jsx)(l.b,{path:d.find((function(t){return"uploaded"===t.action})).path,exact:!0,children:Object(h.jsx)(k,{store:a,dispatch:n})}),Object(h.jsx)(l.b,{path:d.find((function(t){return"favorites"===t.action})).path,exact:!0,children:Object(h.jsx)(Y,{store:a,dispatch:n})}),Object(h.jsx)(l.b,{path:d.find((function(t){return"login"===t.action})).path,exact:!0,children:Object(h.jsx)(J,{dispatch:n})}),Object(h.jsx)(l.b,{path:"/",exact:!0,children:Object(h.jsx)(R,{store:a,dispatch:n})}),Object(h.jsx)(l.a,{to:"/"})]})})]})})};r.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(K,{})}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.79a10237.chunk.js.map